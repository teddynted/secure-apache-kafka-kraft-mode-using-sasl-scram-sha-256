Type: 'AWS::EC2::LaunchTemplate'
Properties:
  LaunchTemplateName: ${self:provider.stage}-ApacheKafkaEC2LaunchTemplate
  LaunchTemplateData:
    InstanceType: { 'Ref': 'InstanceType' }
    ImageId: { 'Ref': 'LatestAmiId' }
    SecurityGroupIds:
      - { 'Fn::GetAtt': ['MyKafkaSecurityGroup', 'GroupId'] }
    KeyName: !Join [ "-", [ {"Ref": "KeyPairName"}, { 'Ref': 'AWS::Region' } ] ]
    IamInstanceProfile:
      Arn: { 'Fn::GetAtt': ['Ec2IAMProfile', 'Arn'] }