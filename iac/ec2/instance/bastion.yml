Type: AWS::EC2::Instance
DependsOn: [NodeOne1, NodeTwo1, NodeThree1]
Properties:
  InstanceType: t2.micro
  KeyName: !Join [ "-", [ {"Ref": "KeyPairName"}, { 'Ref': 'AWS::Region' } ] ]
  # SubnetId: { "Ref": "KafkaPublicSubnet" }
  # SecurityGroupIds:
  #   - { "Ref": "BastionSecurityGroup" }
  ImageId: { "Ref": "LatestAmiId" }
  NetworkInterfaces: 
    - AssociatePublicIpAddress: "true"
      DeviceIndex: "0"
      GroupSet: 
        - {"Ref": "BastionSecurityGroup"}
      SubnetId: {"Ref": "KafkaPublicSubnet"}
  Tags:
    - Key: Name
      Value: JumpServer
  UserData:
    Fn::Base64: !Sub |
      #!/bin/bash
      yum update -y
      yum install -y aws-cli pssh
